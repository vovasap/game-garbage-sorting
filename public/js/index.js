(()=>{"use strict";const e=[{name:"вторсырье",colorName:"yellow",color:"#ffd204"},{name:"смешанные",colorName:"green",color:"#8ec10f"},{name:"бытовые",colorName:"blue",color:"#0363f2"},{name:"опасные",colorName:"red",color:"#df2726"}],t=document.querySelector(".answer__counter_right"),o=document.querySelector(".answer__counter_wrong"),n=document.querySelector(".timer__garbage"),r=document.querySelector(".timer__garbage-shadow"),c=document.querySelector(".timer__result"),s=document.querySelector(".info__play-again"),a=document.querySelector(".info__timer"),i=document.querySelector(".field__info"),l=document.querySelector(".field__header");let d,u=0,m=0,_=[],h=[],y=0,g=0,f=!0,p=!1;function x(){h=Object.values(e).map((e=>e.color)),_=document.querySelectorAll(".bucket__container"),_.forEach((e=>{e.style.cursor="pointer",e.addEventListener("click",q)})),s.addEventListener("click",b),L();const[t,o]=S(n);u=t,m=o,c.classList.remove("hidden")}function b(){s.classList.add("hidden"),a.classList.remove("hidden"),i.style.justifyContent="space-between",y=0,g=0,t.textContent=y,o.textContent=g,l.textContent="Выбери правильный бак для сортировки мусора!",x(),C()}function L(){const e=Math.floor(Math.random()*h.length);n.style.backgroundColor=h[e],n.dataset.color=h[e],d=h[e],n.classList.remove("hidden")}function q(e){if(p)return;c.classList.remove(f?"right":"wrong"),p=!0;const s=e.target.closest(".bucket__container"),a=s.querySelector(`[data-color="${s.dataset.color}"`);r.classList.remove("hidden"),r.style.backgroundColor=s.dataset.color,r.classList.remove("hidden"),s.dataset.color===d?(y+=1,t.textContent=y,f=!0):(g+=1,o.textContent=g,f=!1);const[i,l]=S(a);n.animate([{width:"30px",height:"30px"},{transform:`translate(${i-u}px , ${l-m-20}px)`,width:"20px",height:"20px"}],{duration:350,easing:"ease-in-out"}),a.animate([{top:"5px"},{top:"-45px"},{top:"5px"}],{duration:700,easing:"ease-in-out"}),r.animate([{opacity:1},{transform:`translate(${i-u}px , ${l-m-20}px)`,width:"20px",height:"20px"}],{duration:350,easing:"ease-in"}),setTimeout((()=>{c.classList.add(f?"right":"wrong"),n.classList.add("hidden"),r.classList.add("hidden")}),333.3333333333333),setTimeout((()=>{p=!1}),1300),setTimeout((()=>{L()}),950)}function S(e){const{x:t,y:o,height:n,width:r}=e.getBoundingClientRect();return[(t+r/2).toFixed(0),(o+n/2).toFixed(0)]}let k=0,v=60,w=null;function C(){document.querySelector(".timer__start-button").classList.add("hidden"),x(),w=setInterval((()=>{k=k+=1,v=60-k,$(),0===v&&(clearInterval(w),_.forEach((e=>{e.style.cursor="auto",e.removeEventListener("click",q)})),s.removeEventListener("click",x),n.classList.add("hidden"),r.classList.add("hidden"),c.classList.add("hidden"),i.style.justifyContent="center",a.classList.add("hidden"),s.classList.remove("hidden"),l.textContent=`Отлично! Ты набрал ${y} очков из ${y+g}!`,k=0,v=60,$())}),1e3)}function $(){const e=`${(283*function(){const e=v/60;return e-1/60*(1-e)}()).toFixed(0)} 283`;document.querySelector(".timer__path-remaining").setAttribute("stroke-dasharray",e)}!function(){!function(){const t=document.querySelector(".buckets"),o=document.querySelector("#bucket");e.forEach(((e,n)=>{const r=o.content.cloneNode(!0),c=r.querySelector(".bucket__label");c.textContent=e.name,c.style.backgroundColor=e.color;const s=r.querySelector(".bucket__container"),a=r.querySelector(".bucket__top"),i=r.querySelector(".bucket__base");a.style.zIndex=50-n,i.style.zIndex=100-n,s.dataset.color=e.color,a.dataset.color=e.color,a.setAttribute("src",`./assets/images/wastetop_${e.colorName}.jpg`),a.setAttribute("alt",`wastetop_${e.colorName}`),i.setAttribute("src",`./assets/images/wastebox_${e.colorName}.jpg`),i.setAttribute("alt",`wastebox_${e.colorName}`),t.append(r)}))}();const t=document.querySelector(".timer__start-button"),o=document.querySelector(".game__close");t.addEventListener("click",C),o.addEventListener("click",(()=>{console.log("close")}))}()})();